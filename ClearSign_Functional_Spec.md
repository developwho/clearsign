# ClearSign — 핵심 기능 명세서 (Functional Spec)

> **해커톤:** Gemini 3 Seoul | 2026.02.28 | 빌드 7시간 (10:00→17:00)
> **심사 비중:** Demo 50% · Impact 25% · Creativity 15% · Pitch 10%
> **트랙:** Gemini for Good
> **한 줄 정의:** 임대차 계약서를 업로드하면 위험을 시각화하고, 이해될 때까지 설명을 바꾸며, 구체적 행동까지 생성하는 에이전틱 접근성 파이프라인

---

## 1. 사용자 시나리오 (Golden Path)

```
사용자: 임대차 계약서 PDF/사진을 업로드한다
    ↓
화면 1: 위험 지형도 — "이 계약서에서 잃을 수 있는 최대 금액: ₩12,400,000"
    ↓  (조항별 위험 비율이 시각적으로 즉시 보임)
화면 2: 조항별 Deviation Score — 표준 대비 이탈 조항이 빨간색으로 강조
    ↓  (각 조항이 "얼마나 비정상인지" 수치로 표시)
화면 3: 쉬운 한국어 변환 — 위험 조항을 쉬운 말 + 구체적 시나리오로 설명
    ↓
화면 4: 행동 스크립트 — 이탈도에 따라 협상 메시지 or 사기 경고 + 신고 연결
```

**데모 소요 시간 목표: PDF 업로드 → 최종 결과 30초 이내**

---

## 2. 기능 정의 (우선순위별)

### ⬛ P0: 데모 성패를 가르는 핵심 (반드시 구현)

---

#### F1. 계약서 업로드 & 구조화

| 항목 | 내용 |
|---|---|
| **입력** | 임대차 계약서 PDF 또는 카메라 촬영 이미지 |
| **출력** | 조항별 구조화된 JSON (조항번호, 제목, 본문 텍스트) |
| **핵심 동작** | Gemini 3.1 Pro 멀티모달 비전으로 문서 레이아웃 이해 → 조항 단위 파싱 |
| **성공 기준** | 국토부 표준 임대차 계약서 기준 주요 조항 10개 이상 정확 추출 |
| **폴백** | 사전 준비된 샘플 계약서의 하드코딩된 JSON으로 전환 |

---

#### F2. Deviation Score (표준 대비 이탈도)

| 항목 | 내용 |
|---|---|
| **입력** | F1에서 추출된 조항별 JSON + 국토부 표준 계약서 baseline |
| **출력** | 조항별 이탈도 점수 (0~100%) + 이탈 방향 요약 (1문장) |
| **핵심 동작** | Gemini thinking_level=high로 의미론적 비교 수행. 같은 뜻이 다른 문장으로 쓰여도 감지 |
| **출력 예시** | `"제8조(수리 책임) — 이탈도 87% | 통상 임대인 책임인 부분이 임차인에게 전가됨"` |
| **성공 기준** | 위험 조항 3개 이상 정확 식별, 이탈 방향 설명이 법적으로 타당 |
| **폴백** | 핵심 5개 조항(보증금 반환, 수리 책임, 계약 해지, 특약, 위약금)만 비교 |

---

#### F3. 위험 지형도 시각화

| 항목 | 내용 |
|---|---|
| **입력** | F2의 이탈도 점수 + 경제적 리스크 추정 금액 |
| **출력** | 시각적 대시보드 (React 컴포넌트) |
| **핵심 요소** | ① 중앙 큰 숫자: "잃을 수 있는 최대 금액" ② 조항별 리스크 비율 바 차트 ③ 이탈도별 색상 코딩 (초록→노랑→빨강) |
| **성공 기준** | 텍스트를 읽지 않아도 "어디가 위험한지" 3초 안에 파악 가능 |
| **핵심 UX 원칙** | 숫자와 색상이 먼저, 텍스트는 보조. 농인/비농인 모두 동일하게 직관적 |

---

#### F4. 쉬운 한국어 변환

| 항목 | 내용 |
|---|---|
| **입력** | 이탈도 상위 3개 위험 조항의 원문 |
| **출력** | 3단계 설명 (사용자가 선택 가능) |
| **Level 1** | 쉬운 한국어 (초등 5학년 수준) — 짧은 문장, 일상 단어만 |
| **Level 2** | 시각적 비유 + 아이콘 — "이건 마치 ○○한 상황입니다" |
| **Level 3** | 구체적 시나리오 — "만약 보일러가 고장나면, 이 계약서에서는 당신이 120만원을 내야 합니다" |
| **성공 기준** | 한국어가 모어가 아닌 사람(이주민/농인)이 읽어도 핵심 위험을 이해 가능 |
| **데모 시 기본값** | Level 3 (가장 임팩트 있는 시나리오 기반 설명) |
| **변환 예시** | A) 약은  매 식사 후에 한 개씩 드세요. -> A) 약 아침, 점심, 저녁 밥 끝 한 번 매일, B)부정맥 -> B)심장 똑같이 반복, 정상 갑자기 빠름 느림, 심각한 문제 |

---

### ⬜ P1: 임팩트를 높이는 기능 (가능하면 구현)

---

#### F5. 행동 스크립트 생성

| 항목 | 내용 |
|---|---|
| **입력** | F2의 이탈도 + F4의 변환 결과 |
| **출력 (분기)** | **이탈도 ≤ 60%:** 임대인에게 보낼 수정 요청 메시지 생성 |
| | **이탈도 > 60%:** 전세사기 위험 경고 + 관할 주민센터/법률구조공단 연결 정보 |
| **핵심 가치** | 농인은 전화 협상 불가 → 텍스트 기반 협상 도구가 치명적으로 필요 |
| **출력 예시 (협상)** | `"집주인님, 계약서 제8조(수리 책임) 조항에 대해 말씀드립니다. 국토부 표준 계약서에 따르면 주요 시설물 수리는 임대인 책임입니다. 해당 조항을 표준에 맞게 수정해주시면 감사하겠습니다."` |
| **출력 예시 (경고)** | `"⚠️ 전세사기 위험 감지 — 보증금 반환 조항 누락 + 특약에 면책 조항 존재. 계약 전 반드시 확인: ① 등기부등본 열람 ② 전입신고 ③ 법률구조공단 (132) 상담"` |
| **폴백** | 하드코딩된 템플릿 기반 메시지 (Gemini 생성 대신) |

---

#### F6. 실시간 전세사기 이력 검증 (Google Search 그라운딩)

| 항목 | 내용 |
|---|---|
| **입력** | 계약서에서 추출된 주소 또는 임대인 정보 |
| **출력** | 해당 건물/지역의 전세사기 뉴스 유무 + 요약 |
| **핵심 동작** | Google Search 그라운딩으로 실시간 뉴스/판례 검색 |
| **성공 기준** | "이 주소에서 전세사기 관련 뉴스가 2건 발견되었습니다" 수준 출력 |
| **폴백** | 기능 제거 (데모에서 언급만) |

---

### ◻️ P2: 보너스 (시간 남으면)

---

#### F7. 관점 전환 장치 (데모 오프닝용)

| 항목 | 내용 |
|---|---|
| **설명** | 실제 계약서의 핵심 조항을 일본어 법률용어로 치환 + 어순을 뒤섞어 표시하는 별도 화면 |
| **목적** | 심사위원이 "자막이 있어도 의미가 도달하지 않는" 경험을 15초 안에 체감 |
| **구현 수준** | 프론트엔드 정적 화면 1장이면 충분 (AI 불필요) |
| **데모 위치** | 1분 영상 첫 10초 / 라이브 피치 첫 15초 |

#### F8. 다국어 확장 데모

| 항목 | 내용 |
|---|---|
| **설명** | 영어 Lease Agreement를 입력해도 동일 파이프라인 작동 시연 |
| **목적** | "한국 전세 → 미국 ADA → 글로벌" 확장성 증명 |
| **폴백** | 피치에서 구두 언급만 |

---

## 3. Gemini 기능 매핑

| ClearSign 기능 | Gemini 기능 | 왜 Gemini 없이 불가능한가 |
|---|---|---|
| F1 (문서 구조화) | **멀티모달 비전** (3.1 Pro) | 스캔/사진/PDF 형태 무관하게 레이아웃 이해 + 텍스트 추출 |
| F2 (Deviation Score) | **추론** (thinking_level=high) | "동일한 의미가 다른 문장으로 표현"된 이탈을 감지하는 의미론적 비교. 규칙 기반 불가 |
| F2 (표준 DB 비교) | **함수 호출** | 표준계약서 baseline 조회 + 위험도 채점 함수 실행 |
| F4 (쉬운 한국어) | **텍스트 생성** (3.1 Pro) | 법률 용어 → 다단계 난이도 변환. 단순 사전 치환으로 불가 |
| F5 (행동 스크립트) | **텍스트 생성 + 함수 호출** | 이탈도 기반 조건 분기 + 맥락에 맞는 협상 메시지 생성 |
| F6 (사기 이력 검증) | **Google Search 그라운딩** | 실시간 뉴스/판례 검색으로 팩트 검증 |
| 전체 파이프라인 | **ADK 오케스트레이션** | Agent 간 순차·조건부 실행 + 상태 전달 |

**Gemini 기능 최소 5개 동시 활용:** 멀티모달 비전, 추론(Thinking), 함수 호출, Google Search 그라운딩, ADK

---

## 4. 데이터 요구사항

| 데이터 | 출처 | 준비 상태 | 용도 |
|---|---|---|---|
| 국토부 표준 임대차 계약서 | 국토부 공개 | 공개 PDF 확보 필요 | Deviation Score baseline |
| 샘플 위험 계약서 | 직접 제작 | 당일 제작 (표준 계약서 변조) | 데모용 입력 |
| 조항별 법적 기준 | 주택임대차보호법 | 핵심 조항 5~10개 정리 필요 | F2 판단 기준 |

---

## 5. 데모 시나리오 (1분 영상용)

### 영상 스크립트

```
[0:00-0:10] 관점 전환 장치
  화면: 일본어 법률용어로 치환된 계약서
  자막: "이것이 농인이 보는 계약서입니다. 글자는 보입니다. 의미는 도달하지 않습니다."

[0:10-0:20] 문제 선언 + 업로드
  화면: ClearSign 메인 화면 → PDF 드래그앤드롭
  자막: "ClearSign에 계약서를 올리면—"

[0:20-0:35] 핵심 데모 — 위험 지형도 + Deviation Score
  화면: 분석 로딩(2~3초) → 위험 지형도 렌더링
         중앙: "잃을 수 있는 최대 금액: ₩12,400,000"
         조항별 빨간/노란/초록 바
         이탈 조항 클릭 → Deviation Score 상세
  자막 없음 (시각적으로 자명해야 함)

[0:35-0:45] 쉬운 한국어 변환
  화면: 위험 조항 선택 → Level 3 시나리오 설명 표시
         "만약 보일러가 고장나면, 이 계약서에서는 당신이 120만원을 내야 합니다"
  자막: "법률 용어 없이, 실제 상황으로 설명합니다"

[0:45-0:55] 행동 스크립트
  화면: "수정 요청 메시지 생성" 버튼 → 즉시 텍스트 생성
         또는 이탈도 높을 시: "⚠️ 전세사기 위험" 경고 화면
  자막: "위험을 아는 것에서 위험을 바꾸는 것까지"

[0:55-1:00] 클로징
  화면: ClearSign 로고 + 한 문장
  자막: "정보가 전달된 것과 이해된 것은 다릅니다."
```

### 라이브 데모 (3분, Top 6 진출 시)

```
[0:00-0:30] 관점 전환 + 문제 선언 (영상 앞부분과 동일)
[0:30-2:00] 라이브 시연 — 실제 PDF 업로드 → 전체 플로우
[2:00-2:30] 확장성: "농인 → 고령자 → 이주민 → 모든 사람의 계약"
[2:30-3:00] 클로징 + Q&A 대비
```

---

## 6. 폴백 계획 (시간/기술 리스크 대응)

| 시나리오 | 트리거 | 폴백 |
|---|---|---|
| Agent 파이프라인 전체 실패 | 14:30까지 E2E 미완성 | F1+F2만 단일 Gemini 호출로 구현, F3~F5는 사전 준비된 결과 표시 |
| PDF 파싱 불안정 | 멀티모달 비전 오류율 높음 | 텍스트 직접 붙여넣기 입력 모드 추가 |
| 실시간 처리 지연 | 응답 10초 이상 | 사전 분석된 샘플 계약서 캐시 → 데모 시 즉시 전환 |
| Google Search 그라운딩 실패 | F6 미작동 | F6 제거, F1~F5만으로 데모 |
| 배포 실패 | Cloud Run 장애 | 로컬 데모 + ngrok 터널링 |

---

## 7. 금지사항 체크리스트 (해커톤 규정)

- [x] ~~기본 RAG~~ → 에이전틱 파이프라인 (분석→변환→행동 생성)
- [x] ~~Streamlit~~ → React 웹앱
- [x] ~~단순 이미지 분석~~ → 멀티홉 법률 추론 + 의미론적 비교
- [x] ~~AI 교육 챗봇~~ → 도메인 특화 워크플로우
- [x] ~~의료 진단~~ → 법률/행정 도메인
- [x] ~~프레젠테이션~~ → "Show us what you have built" (기술 데모만)

---

*v2.0 | 심사 기준 재분석 반영 | 2026-02-27*
